{% extends "base_site.html" %}
{% load static %}
{% block title %}Casteable{% endblock %}

{% block extra_head %}
{{ block.super }}

<!-- Swiper CSS -->
<link href="https://unpkg.com/swiper@9/swiper-bundle.min.css" rel="stylesheet">

<!-- ============================== -->
<!--   ðŸŸ¦ TU CSS COMPLETO AQUÃ      -->
<!-- ============================== -->
<style>
  .hero-main-title {
    font-family: "Poppins", sans-serif;
    font-size: 2.8rem;
    font-weight: 700;
    line-height: 1.2;
  }
  .hero-main-sub {
    max-width: 55ch;
    font-size: 1.15rem;
  }
  .bc-card {
    width: 200px;
    background: var(--card, #fff);
    border-radius: 18px;
    box-shadow: var(--shadow, 0 8px 22px rgba(0,0,0,.08));
    overflow: hidden;
    transition: .25s;
  }
  .bc-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 26px rgba(0,0,0,.15);
  }
  .bc-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
  }
  .hero-swiper img {
    height: 430px;
    object-fit: cover;
    border-radius: 20px;
  }

  .featured-swiper .swiper-slide { transition: transform .25s ease; }
  .featured-swiper .swiper-slide:hover { transform: translateY(-6px); }

  .catalog-card {
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
      transition: .25s;
  }
  .catalog-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 26px rgba(0,0,0,.15);
  }
  .catalog-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
  }

  .offer-box {
    background: #d60000;
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.78rem;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 4px;
  }

  .offer-final {
    font-size: 1.1rem;
    font-weight: 900;
    color: #d60000;
  }

  .offer-original {
    font-size: 0.9rem;
    color: #777;
    text-decoration: line-through;
    margin-left: 6px;
  }

  .product-price-box {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-wrap: wrap;
  }
</style>
{% endblock %}


{% block content %}

{% include "includes/usp_strip.html" %}

{% include "core/hero.html" %}
{% include "core/featured_products.html" %}
{% include "core/catalog_sections.html" %}
{% include "core/latest_slider.html" %}
{% include "includes/occasions.html" %}
{% include "core/categories.html" %}
{% include "core/latest_grid.html" %}
{% include "core/info.html" %}
{% include "core/testimonials.html" %}
{% include "includes/newsletter.html" %}
{% include "includes/faqs.html" %}
{% include "core/contact.html" %}

{% endblock %}

{% block extra_js %}
{{ block.super }}

<script src="https://unpkg.com/swiper@9/swiper-bundle.min.js"></script>

<!-- ============================== -->
<!--       ðŸŸ¦ SWIPERS JS           -->
<!-- ============================== -->
<script>

new Swiper('.hero-swiper', {
  loop: true,
  autoplay: { delay: 5500 },
  effect: 'fade',
  pagination: { el: '.hero-swiper .swiper-pagination', clickable: true },
});

new Swiper('.slider-products-swiper', {
  loop: true,
  autoplay: { delay: 4000 },
  speed: 600,
  slidesPerView: 'auto',
  spaceBetween: 24,
  pagination: { el: '.slider-products-swiper .swiper-pagination', clickable: true },
});

new Swiper('.testimonials-swiper', {
  loop: true,
  autoplay: { delay: 5000 },
  slidesPerView: 1,
  spaceBetween: 24,
  pagination: { el: '.testimonials-swiper .swiper-pagination', clickable: true },
  breakpoints: { 768: { slidesPerView: 2 }, 1200: { slidesPerView: 3 } }
});

document.addEventListener("DOMContentLoaded", function () {
  const fpSwiper = new Swiper(".featured-swiper", {
      loop: true,
      autoplay: {
          delay: 5000,
          disableOnInteraction: false,
          pauseOnMouseEnter: true,
      },
      speed: 900,
      slidesPerView: 1.2,
      spaceBetween: 20,
      breakpoints: {
          576: { slidesPerView: 2 },
          992: { slidesPerView: 3 },
          1400: { slidesPerView: 4 },
      },
      pagination: {
          el: ".featured-swiper .swiper-pagination",
          clickable: true,
      },
  });
});
</script>

<!-- ============================= -->
<!--   ðŸŸ¦ CATÃLOGOS DINÃMICOS JS   -->
<!-- ============================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {

    const catalogSections = JSON.parse(`{{ sections_config|default:"[]"|safe }}`);

    catalogSections.forEach(sec => {

        const total = sec.total;

        new Swiper(`.catalog-swiper-${sec.id}`, {

            loop: total > 4,

            autoplay: {
                delay: 4200,
                disableOnInteraction: false,
            },

            speed: 900,
            grabCursor: true,

            slidesPerView: 'auto',
            spaceBetween: 20,

            breakpoints: {
                0:   { slidesPerView: total >= 1 ? 1.2 : 1 },
                576: { slidesPerView: total >= 2 ? 2 : total },
                768: { slidesPerView: total >= 3 ? 3 : total },
                1200:{ slidesPerView: total >= 4 ? 4 : total }
            },

            pagination: {
                el: `.catalog-swiper-${sec.id} .swiper-pagination`,
                clickable: true
            }
        });

    });

});
</script>

{% endblock %}
